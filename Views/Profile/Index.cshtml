@model Pink_Panthers_Project.Models.CourseView

@{
    ViewData["Title"] = "Dashboard";
}

<h1>Hello, @Html.DisplayFor(Model => Model.Account!.FirstName) @Html.DisplayFor(Model => Model.Account!.LastName)</h1>

<!DOCTYPE html>
<html>
<head>
    <meta name="viewport" content="width=device-width" />
</head>
<body>
    <div class="container">
        <div class="row mt-5">
            @if (Model != null && Model.Account!.isTeacher)
            {

                <!-- Display courses for teachers -->

                @foreach (var course in Model.TeachingCourses!)
                {
                    string headerColor = RandomHexColor(); // Generate a random hex color

                    <div class="col-md-3">
                        <div class="card mb-4 custom-card">
                            <div class="card-header" style="background-color: @course.color;">@course.CourseNumber</div>
                            <div class="card-body">
                                @course.CourseName<br />
                                @course.Room<br />
                                @course.StartTime.ToString("hh:mm tt") - @course.EndTime.ToString("hh:mm tt")<br />
                                @course.Days
                            </div>
                        </div>
                    </div>
                }
            }
            else if (Model != null && !Model.Account!.isTeacher)
            {
                <!-- Display courses for students -->
                @foreach (var course in Model.RegisteredCourses!)
                {
                    string headerColor = RandomHexColor(); // Generate a random hex color
                    <div class="col-md-3">
                        <div class="card mb-4 custom-card">
                            <div class="card-header" style="background-color: @course.color;">@course.CourseNumber</div>
                            <div class="card-body">
                                @course.CourseName<br />
                                @course.tName<br />
                                @course.Room<br />
                                @course.StartTime.ToString("hh:mm tt") - @course.EndTime.ToString("hh:mm tt")<br />
                                @course.Days
                            </div>
                        </div>
                    </div>
                }
            }
        </div>
    </div>
</body>
</html>

@functions {

    string RandomHexColor()
    {
        Random random = new Random();
        string hexColor;

        double brightness;
       
        // Generate a random color
        int red = random.Next(256);
        int green = random.Next(256);
        int blue = random.Next(256);

        // Calculate brightness
        brightness = 0.299 * red + 0.587 * green + 0.114 * blue;

        // Convert RGB to hex
        hexColor = $"#{red:X2}{green:X2}{blue:X2}";

        if(brightness > 128)
        {
            hexColor += ";color:#000";
        }
        // Check if brightness is above the threshold (e.g., 128)
        

        return hexColor;
    }
}
